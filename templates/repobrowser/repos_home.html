<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html>
	<head>
		<link rel="stylesheet" href="{{STATIC_URL}}common/css/bootstrap.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="{{STATIC_URL}}common/css/bootstrap-responsive.css" type="text/css" media="screen"/>
	</head>
    <script>



    </script>
	<body>

        <div id="addRepoModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <form action='/repos/save/' method='POST'> {% csrf_token %}
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3 id="addRepoModalHeader">Add a new Repository</h3>
            </div>

            <div class="modal-body">

                    <table class='table table-bordered table-striped' id='addRepoTable'>

                            <tr>
                                <td>Name</td>
                                <td><input name='repo_name' type='text' placeholder="Repository Name"></td>
                            </tr>
                            <tr>
                                <td>Description</td>
                                <td><input name='repo_descrip' type='text' placeholder="Description"></td>
                            </tr>
                            <tr>
                                <td>URL</td>
                                <td><input name='repo_url' type='text' pattern="^(svn|http):.*" placeholder="svn: or http:"></td>
                            </tr>
                    </table>

            </div>
            <div class="modal-footer">
                <button class='btn'  data-dismiss="modal" aria-hidden="true">Cancel</button>
                <input type='reset' class='btn'>
                <input class="btn btn-primary" type="submit">
            </div>
            </form>
        </div>
		<div style="margin-left:1000px; margin-top: 30px; font-size: 3">
			<h1>Welcome {{username}}</h1>
			<br>
			<a href="/registration/signout/">Logout</a>
		</div>
		<div style="width: 1200px; height: 700px; margin-left: 2cm; margin-top: 30px;">
			<h2>Your Repositories</h2>
            {% if errors|length > 0 %}
               {% for k,v in messages.iteritems %}
                    <div class="alert alert-{{ k }}">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                        {{ v }}
                    </div>
                {% endfor %}
            {% endif %}
                <div class="alert alert-info" style="padding: 5px;">
                    <a href="#addRepoModal" role="button" class="btn" data-toggle="modal">Add a Repository</a>
                </div>
            <table class="table table-bordered table-striped" id="repoTable">
            {% if repos|length != 0 %}
				<thead>
					<tr>
						<th>#</th>
						<th>Repository Name</th>
						<th>Repository Url</th>
						<th>Repository Description</th>
					</tr>
				</thead>
				<tbody>
					{%for repo in repos%}
					<tr>
						<td>{{forloop.counter}}</td>
						<td>{{repo.repo_name}}</td>
						<td><a href='/repos/revisions/?repo_url={{repo.repo_url}}&repo_name={{repo.repo_name}}&repo_id={{repo.id}}'>
							View revision history for {{repo.repo_name}}</a></td>
						<td>{{repo.repo_description}}</td>
					</tr>
					{%endfor%}
				</tbody>
        {% else %}
            <tr><td>Unfortunately, you have not added any repositories yet.</tr>
        {% endif %}
            </table>
		</div>

		<script type="text/javascript" src="{{STATIC_URL}}common/js/jquery.js"></script>
		<script type="text/javascript" src="{{STATIC_URL}}common/js/bootstrap.js"></script>

	</body>
</html>
